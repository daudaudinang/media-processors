<html>
  <head>
    <meta charset="utf-8">
    <title>Light Adjustment Example</title>
  </head>
  <body>
    <h1>Light Adjustment Example</h1>

    <video id="video" autoplay playsinline></video>
    <video id="videoOriginal" autoplay playsinline></video>

    <script src="./light-adjustment/light_adjustment.js"></script>
    <script>
      if (!Shiguredo.LightAdjustmentProcessor.isSupported()) {
          alert("Unsupported platform");
          throw Error("Unsupported platform");
      }

      navigator.mediaDevices.getUserMedia({video: true}).then(async (stream) => {
          const track = stream.getVideoTracks()[0];
          const processor = new Shiguredo.LightAdjustmentProcessor();
          const processedTrack = await processor.startProcessing(track);
          const videoElement = document.getElementById("video");
          videoElement.srcObject = new MediaStream([processedTrack]);

          document.getElementById("videoOriginal").srcObject = new MediaStream([track]);
      });
    </script>
  </body>
</html>
